---
description: how to create a plugin
alwaysApply: false
---

- a plugin should always be located under: `./src/plugins/`
- a service file must be named: `[name].plugin.ts`
- A plugin is a function that receives the `app: Application` object and augments it.
- Plugins typically attach services or add middleware to the app, e.g. `app.configService`, `app.logger`, `app.pg`.
- Create a plugin when you need to:
  - Attach an **infrastructure service** used across multiple modules (config, logger, DB clients, Redis)
  - Add **global middleware** (CORS, body parsing, security headers)
  - Set up **shared resources** that modules depend on before they initialize
- Plugins are being registered inside the `buildApp` function under `app.ts` file, using the `new AppFactory().registerPlugins` method.
- Plugins execute **sequentially** in registration order. Order matters when one plugin depends on another.
